<html>
    <head>
        <title>client</title>
        
    </head>
    <body>
        <input type='text' id='msg'/>
        <a href='#' onclick='javascript:sendData()'>send</a>
        <span id="fromServer"></span>
    </body>
</html>

<script>
console.log('client');

var ws = new WebSocket('ws://localhost:3000');

ws.onopen = function(event){
    ws.send(JSON.stringify({
        type: "join",
        msg: "join1"
    }));
};

ws.onmessage = function(event){
    console.log(event);
    var data = JSON.parse(event.data);
    document.getElementById('fromServer').innerHTML += '<br/>' + data.msg;
}

function sendData(){
    var data = {
        id : 'client' + (new Date()),
        msg : document.getElementById('msg').value
    };
    
    console.log(JSON.stringify(data));
    ws.send(JSON.stringify(data));
}

</script>